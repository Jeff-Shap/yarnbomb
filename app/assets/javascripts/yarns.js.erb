// Place all the behaviors and hooks related to the matching controller here.
// All this logic will automatically be available in application.js.

// $(document).ready(function() {
//   $('#catyarn_pic').mouseenter(function() {
//     console.log('enter');
//     $(this).css({"z-index":"-1"});
//     $('#catyarn_gif').css({"z-index":"100"});
//   });
// });

$(document).ready(function() {

  $('#image_window').mouseenter(function() {
    $(this).css({"background-image":"url(<%= asset_path 'catyarn_slow.gif' %>)"});
  });

  $('#image_window').mouseleave(function() {
    $(this).css({"background-image":"url(<%= asset_path 'catyarn_first.jpg' %>)"});
  });

  $('input[type=number]').unbind('change').bind('change', function() {
    
    
    var input_number = $(this).val()
    var current_num_of_skein_fields = ($('.skein_row').length - 1);
    var num_of_skeins_to_clone = (input_number - current_num_of_skein_fields);
    
    
    if (num_of_skeins_to_clone > 0) {
      i = num_of_skeins_to_clone
      temp_id = current_num_of_skein_fields + 1;
      var current2 = ($('.skein_row').length - 1);
      while (i > 0) {
        var skein_div_clone = $('#skein_template').clone();
        console.log("add div");
        console.log("i = " + i);
        console.log("before temp_id = " + temp_id);
        console.log("current_num_of_skein_fields = " + current_num_of_skein_fields);
        console.log("num_of_skeins_to_clone = " + num_of_skeins_to_clone);
        $("label[for='yarn_skein_length']:first").html("Skein "+(temp_id + 1)+" length: ");
        
        skein_div_clone.attr("id", "skein_row" + temp_id);
        skein_div_clone.css({"visibility":"visible"});
        console.log(skein_div_clone.appendTo("#yarn_form"));
        $('#yarn_form_container input:last').attr("id", "skein_row_field" + (temp_id));
        $('#yarn_form_container input:last').attr("name", "skein_lengths["+temp_id+"]");
        temp_id = temp_id + 1;
        console.log("after temp_id = " + temp_id);
        i = i - 1
      }
    }
    else if (num_of_skeins_to_clone < 0) {
      i = num_of_skeins_to_clone
      temp_id = current_num_of_skein_fields;
      while (i < 0) {
      console.log('input = ' + input_number);
      console.log('current_num_of_skein_fields =' +current_num_of_skein_fields);
      console.log("num_of_skeins_to_clone = " + num_of_skeins_to_clone);
      console.log('remove div');
      console.log("i = " + i);
      console.log("temp_id = " + temp_id);
      $("label[for='yarn_skein_length']:first").html("Skein "+(temp_id)+" length: ");
      $("#skein_row"+temp_id).remove();
      i = i + 1;
      temp_id = temp_id -1;
    }
    //   i = num_of_skeins_to_clone
    //   while (i < 0) {
    //   }
    }
       



    // $('.skein_row').clone().appendTo("#yarn_form_container > .row > #yarn_form");
    // $('.skein_row').css({"visibility":"visible"});
    
    // for (i = 1; i<= num_of_skeins_to_add; i++) {

    // };
  });

});

